<script src="../../src/customAttributes.js"></script>
<script src="https://cdn.jsdelivr.net/gh/orstavik/ElementObserver@1.1.0/startObserver.js"></script>

<h1 click:hello:sunshine error:log>hello sunshine</h1>
<script>
  (async function () {

    async function reaction(e, prefix) {
      await new Promise(r => setTimeout(r, 100));
      console.log(prefix);
      return e;
    }

    async function error() {
      await new Promise(r => setTimeout(r, 100));
      throw "some async error";
    }

    function log(e) {
      console.log(e.reaction, e.async, e.error);
    }

    customReactions.defineAll({
      "hello": error,
      "sunshine": reaction,
      "log": log
    });
    document.querySelector("h1").click();
  })();
</script>
